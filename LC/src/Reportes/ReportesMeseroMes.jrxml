<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportesMeseroMes" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="85ca9f90-8cf4-416c-8d7b-8f213b76d1aa">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="21"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#D2691E">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#FFDABF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TH" mode="Opaque" backcolor="#8B0000">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_CH" mode="Opaque" backcolor="#FFBFBF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="Tabla_Mesero" uuid="98699c65-7390-4eb7-91fa-24c0f4cf1c5c">
		<queryString language="SQL">
			<![CDATA[select mes,max(empleado) as id_empleado,max(vendido) as vendido,ano as año
from(select id_empleado as empleado, extract(month from fecha) as mes, extract(year from fecha) as ano ,sum(valor_total) as vendido
     from(select id_empleado, valor_total,fecha
           from (select *
                  from factura as m
                   join pedido as e
                    on m.id_pedido = e.id_pedido) as tabla) as l
GROUP BY id_empleado, extract(month from fecha), extract(year from fecha) ) as ventas
GROUP BY mes,ano;]]>
		</queryString>
		<field name="mes" class="java.lang.Double"/>
		<field name="id_empleado" class="java.lang.Integer"/>
		<field name="vendido" class="java.lang.Long"/>
		<field name="año" class="java.lang.Double"/>
	</subDataset>
	<subDataset name="Mesero" uuid="a6c967ab-f17f-4f76-823c-e15eb6cb03af">
		<queryString language="SQL">
			<![CDATA[select empleado.nombres, empleado.apellidos, id_empleado, mes, vendido, año
from(select mes,max(empleado) as id_empleado,max(vendido)as vendido,ano as año
from(select id_empleado as empleado, extract(month from fecha) as mes, extract(year from fecha) as ano ,sum(valor_total) as vendido
     from(select id_empleado, valor_total,fecha
           from (select *
                  from factura as m
                   join pedido as e
                    on m.id_pedido = e.id_pedido) as tabla) as l
GROUP BY id_empleado, extract(month from fecha), extract(year from fecha) ) as ventas
GROUP BY mes,ano) as mesero
natural join empleado;]]>
		</queryString>
		<field name="nombres" class="java.lang.String"/>
		<field name="apellidos" class="java.lang.String"/>
		<field name="id_empleado" class="java.lang.Integer"/>
		<field name="mes" class="java.lang.Double"/>
		<field name="vendido" class="java.lang.Long"/>
		<field name="año" class="java.lang.Double"/>
	</subDataset>
	<parameter name="ano" class="java.lang.Integer"/>
	<queryString>
		<![CDATA[select empleado.nombres, empleado.apellidos, id_empleado, mes, vendido, año
from(select mes,max(empleado) as id_empleado,max(vendido)as vendido,ano as año
from(select id_empleado as empleado, extract(month from fecha) as mes, extract(year from fecha) as ano ,sum(valor_total) as vendido
     from(select id_empleado, valor_total,fecha
           from (select *
                  from factura as m
                   join pedido as e
                    on m.id_pedido = e.id_pedido) as tabla) as l
GROUP BY id_empleado, extract(month from fecha), extract(year from fecha) ) as ventas
GROUP BY mes,ano) as mesero
natural join empleado
where año = $P{ano};]]>
	</queryString>
	<field name="nombres" class="java.lang.String"/>
	<field name="apellidos" class="java.lang.String"/>
	<field name="id_empleado" class="java.lang.Integer"/>
	<field name="mes" class="java.lang.Integer"/>
	<field name="vendido" class="java.lang.Long"/>
	<field name="año" class="java.lang.Integer"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch">
			<staticText>
				<reportElement x="145" y="18" width="238" height="34" uuid="2a924434-4add-4f59-a9d7-0d20f7675c22"/>
				<textElement>
					<font fontName="Arial" size="24"/>
				</textElement>
				<text><![CDATA[Reporte Meseros Mes]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="35" splitType="Stretch"/>
	</pageHeader>
	<detail>
		<band height="358" splitType="Stretch">
			<componentElement>
				<reportElement key="table 3" style="table 3" x="74" y="45" width="360" height="80" uuid="6e352254-0eaf-4ad6-b02e-bd20b0fd070a"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="Tabla_Mesero" uuid="e657748d-aa11-4b99-b4c9-96d1a93c7e38">
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column width="90" uuid="600f7d60-3540-4ab2-a1df-cc27e4a530c8">
						<jr:columnHeader style="table 3_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="6a2c8283-5d78-41c2-bd75-19d4add88105"/>
								<text><![CDATA[mes]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 3_CH" height="30"/>
						<jr:detailCell style="table 3_TD" height="20">
							<textField>
								<reportElement x="0" y="0" width="90" height="20" uuid="8a2974c3-70f2-4bd5-a71d-8c622cdf0a98"/>
								<textFieldExpression><![CDATA[$F{mes}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90" uuid="9e071942-5ebb-4d05-8ae0-2edf5321cd14">
						<jr:columnHeader style="table 3_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="bf273958-30af-4139-adc1-30f4f7eece5f"/>
								<text><![CDATA[id_empleado]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 3_CH" height="30"/>
						<jr:detailCell style="table 3_TD" height="20">
							<textField>
								<reportElement x="0" y="0" width="90" height="20" uuid="0dfe843d-66a0-490e-b1ab-911d68acbc9a"/>
								<textFieldExpression><![CDATA[$F{id_empleado}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90" uuid="b14f29e7-0ab0-410e-8dd1-ce986fb6a4fd">
						<jr:columnHeader style="table 3_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="7977cb10-0fac-4ef4-9eeb-e248fa2c4d6e"/>
								<text><![CDATA[vendido]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 3_CH" height="30"/>
						<jr:detailCell style="table 3_TD" height="20">
							<textField>
								<reportElement x="0" y="0" width="90" height="20" uuid="c1150597-23c7-4bfc-aabe-52000dfb2638"/>
								<textFieldExpression><![CDATA[$F{vendido}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column width="90" uuid="367c038b-3313-46aa-bcaf-4f5fb87d2e2c">
						<jr:columnHeader style="table 3_CH" height="30">
							<staticText>
								<reportElement x="0" y="0" width="90" height="30" uuid="778035d9-579a-450f-940c-ef750ffd1d5d"/>
								<text><![CDATA[año]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:columnFooter style="table 3_CH" height="30"/>
						<jr:detailCell style="table 3_TD" height="20">
							<textField>
								<reportElement x="0" y="0" width="90" height="20" uuid="c9f8d1a0-86f4-4288-a58d-11727a9d6f31"/>
								<textFieldExpression><![CDATA[$F{año}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
